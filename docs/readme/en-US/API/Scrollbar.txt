<h2>custom Scrollbar</h2>
<p>only hide the default scrollbars and render custom ones for styling, based on <a href="https://developer.mozilla.org/en-US/docs/Web/API/ResizeObserver#browser_compatibility"><code>ResizeObserver</code></a><br><strong>it&#39;s unnecessary to manually call <code>Scrollbar.init</code> in advance, but it&#39;d be ok/better to do so if not style window/page</strong></p>
<ul>
<li>used for page/window</li>
</ul>
<pre class="shiki material-theme-palenight" style="background-color:#292D3E;color:#babed8" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic">&#x3C;!-- add class scroller for &#x3C;html> --></span></span>
<span class="line"><span style="color:#89DDFF">&#x3C;</span><span style="color:#F07178">html</span><span style="color:#C792EA"> class</span><span style="color:#89DDFF">=</span><span style="color:#89DDFF">"</span><span style="color:#C3E88D">scroller</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">></span></span>
<span class="line"><span style="color:#89DDFF">  &#x3C;</span><span style="color:#F07178">body</span><span style="color:#89DDFF">></span></span>
<span class="line"><span style="color:#89DDFF">    &#x3C;</span><span style="color:#F07178">script</span><span style="color:#89DDFF">></span></span>
<span class="line"><span style="color:#676E95;font-style:italic">      // call attach without param</span></span>
<span class="line"><span style="color:#BABED8">      Scrollbar</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">attach</span><span style="color:#BABED8">()</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF">    &#x3C;/</span><span style="color:#F07178">script</span><span style="color:#89DDFF">></span></span>
<span class="line"><span style="color:#89DDFF">  &#x3C;/</span><span style="color:#F07178">body</span><span style="color:#89DDFF">></span></span>
<span class="line"><span style="color:#89DDFF">&#x3C;/</span><span style="color:#F07178">html</span><span style="color:#89DDFF">></span></span></code></pre>
<ul>
<li>used for some HTMLElement</li>
</ul>
<pre class="shiki material-theme-palenight" style="background-color:#292D3E;color:#babed8" tabindex="0"><code><span class="line"><span style="color:#89DDFF">&#x3C;</span><span style="color:#F07178">div</span><span style="color:#C792EA"> style</span><span style="color:#89DDFF">=</span><span style="color:#89DDFF">"</span><span style="color:#C3E88D">width:200px;height:300px</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">></span></span>
<span class="line"><span style="color:#676E95;font-style:italic">  &#x3C;!-- scrollable container, required class "scroller". and class "fill" for inheriting height/min-height/max-height --></span></span>
<span class="line"><span style="color:#89DDFF">  &#x3C;</span><span style="color:#F07178">div</span><span style="color:#C792EA"> class</span><span style="color:#89DDFF">=</span><span style="color:#89DDFF">"</span><span style="color:#C3E88D">scroller fill</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">></span></span>
<span class="line"><span style="color:#676E95;font-style:italic">    &#x3C;!-- the content, maybe a list --></span></span>
<span class="line"><span style="color:#89DDFF">    &#x3C;</span><span style="color:#F07178">div</span><span style="color:#C792EA"> id</span><span style="color:#89DDFF">=</span><span style="color:#89DDFF">"</span><span style="color:#C3E88D">list</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">>&#x3C;/</span><span style="color:#F07178">div</span><span style="color:#89DDFF">></span></span>
<span class="line"><span style="color:#89DDFF">  &#x3C;/</span><span style="color:#F07178">div</span><span style="color:#89DDFF">></span></span>
<span class="line"><span style="color:#89DDFF">&#x3C;/</span><span style="color:#F07178">div</span><span style="color:#89DDFF">></span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF">&#x3C;</span><span style="color:#F07178">script</span><span style="color:#89DDFF">></span></span>
<span class="line"><span style="color:#676E95;font-style:italic">  // then call Scrollbar.attach</span></span>
<span class="line"><span style="color:#BABED8">  Scrollbar</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">attach</span><span style="color:#BABED8">(document</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">getElementById</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">'</span><span style="color:#C3E88D">list</span><span style="color:#89DDFF">'</span><span style="color:#BABED8">))</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF">&#x3C;/</span><span style="color:#F07178">script</span><span style="color:#89DDFF">></span></span></code></pre>
<ul>
<li>integrated with others like Vue</li>
</ul>
<pre class="shiki material-theme-palenight" style="background-color:#292D3E;color:#babed8" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic">// in main.js</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">import</span><span style="color:#89DDFF"> {</span><span style="color:#BABED8"> Scrollbar</span><span style="color:#89DDFF"> }</span><span style="color:#89DDFF;font-style:italic"> from</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">utils-where</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">import</span><span style="color:#89DDFF"> {</span><span style="color:#BABED8"> createApp</span><span style="color:#89DDFF"> }</span><span style="color:#89DDFF;font-style:italic"> from</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">vue</span><span style="color:#89DDFF">'</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">import</span><span style="color:#BABED8"> App </span><span style="color:#89DDFF;font-style:italic">from</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">./App.vue</span><span style="color:#89DDFF">'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8">call </span><span style="color:#89DDFF">'</span><span style="color:#C3E88D">Scrollbar.attach()</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF;font-style:italic"> if</span><span style="color:#BABED8"> style window</span><span style="color:#89DDFF">,</span><span style="color:#BABED8"> or only call </span><span style="color:#89DDFF">'</span><span style="color:#C3E88D">Scrollbar.init()</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF"> in</span><span style="color:#BABED8"> advance </span><span style="color:#89DDFF;font-style:italic">if</span><span style="color:#BABED8"> not style window</span><span style="color:#89DDFF">,</span><span style="color:#BABED8"> which would be better for performance</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF">createApp</span><span style="color:#BABED8">(App)</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">mount</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">'</span><span style="color:#C3E88D">#app</span><span style="color:#89DDFF">'</span><span style="color:#BABED8">)</span></span></code></pre>
<ul>
<li>and vue sfc</li>
</ul>
<pre class="shiki material-theme-palenight" style="background-color:#292D3E;color:#babed8" tabindex="0"><code><span class="line"><span style="color:#89DDFF">&#x3C;</span><span style="color:#F07178">template</span><span style="color:#89DDFF">></span></span>
<span class="line"><span style="color:#89DDFF">  &#x3C;</span><span style="color:#F07178">div</span><span style="color:#C792EA"> class</span><span style="color:#89DDFF">=</span><span style="color:#89DDFF">"</span><span style="color:#C3E88D">custom</span><span style="color:#89DDFF">"</span><span style="color:#C792EA"> style</span><span style="color:#89DDFF">=</span><span style="color:#89DDFF">"</span><span style="color:#C3E88D">max-height: 50vh</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">></span></span>
<span class="line"><span style="color:#89DDFF">    &#x3C;</span><span style="color:#F07178">div</span><span style="color:#C792EA"> :class</span><span style="color:#89DDFF">=</span><span style="color:#89DDFF">"</span><span style="color:#C3E88D">['scroller', 'fill', { scrollClass }]</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">></span></span>
<span class="line"><span style="color:#89DDFF">      &#x3C;</span><span style="color:#F07178">div</span><span style="color:#C792EA"> ref</span><span style="color:#89DDFF">=</span><span style="color:#89DDFF">"</span><span style="color:#C3E88D">list</span><span style="color:#89DDFF">"</span><span style="color:#89DDFF">></span></span>
<span class="line"><span style="color:#89DDFF">        &#x3C;</span><span style="color:#F07178">slot</span><span style="color:#89DDFF">>&#x3C;/</span><span style="color:#F07178">slot</span><span style="color:#89DDFF">></span></span>
<span class="line"><span style="color:#89DDFF">      &#x3C;/</span><span style="color:#F07178">div</span><span style="color:#89DDFF">></span></span>
<span class="line"><span style="color:#89DDFF">    &#x3C;/</span><span style="color:#F07178">div</span><span style="color:#89DDFF">></span></span>
<span class="line"><span style="color:#89DDFF">  &#x3C;/</span><span style="color:#F07178">div</span><span style="color:#89DDFF">></span></span>
<span class="line"><span style="color:#89DDFF">&#x3C;/</span><span style="color:#F07178">template</span><span style="color:#89DDFF">></span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF">&#x3C;</span><span style="color:#F07178">script</span><span style="color:#C792EA"> setup</span><span style="color:#89DDFF">></span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">import</span><span style="color:#89DDFF"> {</span><span style="color:#BABED8"> Scrollbar</span><span style="color:#89DDFF"> }</span><span style="color:#89DDFF;font-style:italic"> from</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">utils-where</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">import</span><span style="color:#89DDFF"> {</span><span style="color:#BABED8"> useTemplateRef</span><span style="color:#89DDFF">,</span><span style="color:#BABED8"> onMounted</span><span style="color:#89DDFF"> }</span><span style="color:#89DDFF;font-style:italic"> from</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">vue</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF">defineProps</span><span style="color:#BABED8">([</span><span style="color:#89DDFF">'</span><span style="color:#C3E88D">scrollClass</span><span style="color:#89DDFF">'</span><span style="color:#BABED8">])</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#C792EA">const</span><span style="color:#BABED8"> $list </span><span style="color:#89DDFF">=</span><span style="color:#82AAFF"> useTemplateRef</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">'</span><span style="color:#C3E88D">list</span><span style="color:#89DDFF">'</span><span style="color:#BABED8">)</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF">onMounted</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">()</span><span style="color:#C792EA"> =></span><span style="color:#89DDFF"> {</span></span>
<span class="line"><span style="color:#BABED8">  Scrollbar</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">attach</span><span style="color:#F07178">(</span><span style="color:#BABED8">$list</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">value</span><span style="color:#F07178">)</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF">}</span><span style="color:#BABED8">)</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF">&#x3C;/</span><span style="color:#F07178">script</span><span style="color:#89DDFF">></span></span></code></pre>
<ul>
<li>integrated with others like react</li>
</ul>
<pre class="shiki material-theme-palenight" style="background-color:#292D3E;color:#babed8" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic">// in main.js</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">import</span><span style="color:#89DDFF"> {</span><span style="color:#BABED8"> Scrollbar</span><span style="color:#89DDFF"> }</span><span style="color:#89DDFF;font-style:italic"> from</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">utils-where</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">import</span><span style="color:#BABED8"> React</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> {</span><span style="color:#BABED8"> StrictMode</span><span style="color:#89DDFF"> }</span><span style="color:#89DDFF;font-style:italic"> from</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">react</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">import</span><span style="color:#89DDFF"> {</span><span style="color:#BABED8"> createRoot</span><span style="color:#89DDFF"> }</span><span style="color:#89DDFF;font-style:italic"> from</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">react-dom/client</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">import</span><span style="color:#BABED8"> App </span><span style="color:#89DDFF;font-style:italic">from</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">./App</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8">call </span><span style="color:#89DDFF">'</span><span style="color:#C3E88D">Scrollbar.attach()</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF;font-style:italic"> if</span><span style="color:#BABED8"> style window</span><span style="color:#89DDFF">,</span><span style="color:#BABED8"> or only call </span><span style="color:#89DDFF">'</span><span style="color:#C3E88D">Scrollbar.init()</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF"> in</span><span style="color:#BABED8"> advance </span><span style="color:#89DDFF;font-style:italic">if</span><span style="color:#BABED8"> not style window</span><span style="color:#89DDFF">,</span><span style="color:#BABED8"> which would be better for performance</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA">const</span><span style="color:#BABED8"> app </span><span style="color:#89DDFF">=</span><span style="color:#82AAFF"> createRoot</span><span style="color:#BABED8">(document</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">getElementById</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">'</span><span style="color:#C3E88D">app</span><span style="color:#89DDFF">'</span><span style="color:#BABED8">))</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8">app</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">render</span><span style="color:#BABED8">(</span></span>
<span class="line"><span style="color:#89DDFF">  &#x3C;</span><span style="color:#FFCB6B">StrictMode</span><span style="color:#89DDFF">></span></span>
<span class="line"><span style="color:#89DDFF">    &#x3C;</span><span style="color:#FFCB6B">App</span><span style="color:#89DDFF"> /></span></span>
<span class="line"><span style="color:#89DDFF">  &#x3C;/</span><span style="color:#FFCB6B">StrictMode</span><span style="color:#89DDFF">></span></span>
<span class="line"><span style="color:#BABED8">)</span><span style="color:#89DDFF">;</span></span></code></pre>
<ul>
<li>and react component</li>
</ul>
<pre class="shiki material-theme-palenight" style="background-color:#292D3E;color:#babed8" tabindex="0"><code><span class="line"><span style="color:#89DDFF;font-style:italic">import</span><span style="color:#89DDFF"> {</span><span style="color:#BABED8"> Scrollbar</span><span style="color:#89DDFF"> }</span><span style="color:#89DDFF;font-style:italic"> from</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">utils-where</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">import</span><span style="color:#BABED8"> React</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> {</span><span style="color:#BABED8"> useRef</span><span style="color:#89DDFF">,</span><span style="color:#BABED8"> useEffect</span><span style="color:#89DDFF"> }</span><span style="color:#89DDFF;font-style:italic"> from</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">react</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">export</span><span style="color:#89DDFF;font-style:italic"> default</span><span style="color:#C792EA"> function</span><span style="color:#89DDFF"> ({</span><span style="color:#BABED8;font-style:italic"> scrollClass</span><span style="color:#89DDFF">,</span><span style="color:#BABED8;font-style:italic"> children</span><span style="color:#89DDFF"> })</span><span style="color:#89DDFF"> {</span></span>
<span class="line"><span style="color:#C792EA">  const</span><span style="color:#BABED8"> listRef</span><span style="color:#89DDFF"> =</span><span style="color:#82AAFF"> useRef</span><span style="color:#F07178">()</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF">  useEffect</span><span style="color:#F07178">(</span><span style="color:#89DDFF">()</span><span style="color:#C792EA"> =></span><span style="color:#89DDFF"> {</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">    if</span><span style="color:#F07178"> (</span><span style="color:#BABED8">listRef</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">current</span><span style="color:#F07178">) </span><span style="color:#89DDFF">{</span></span>
<span class="line"><span style="color:#BABED8">      Scrollbar</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">attach</span><span style="color:#F07178">(</span><span style="color:#BABED8">listRef</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">current</span><span style="color:#F07178">)</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF">    }</span></span>
<span class="line"><span style="color:#89DDFF">  },</span><span style="color:#F07178"> [])</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">  return</span><span style="color:#F07178"> (</span></span>
<span class="line"><span style="color:#89DDFF">    &#x3C;</span><span style="color:#F07178">div</span><span style="color:#C792EA"> className</span><span style="color:#89DDFF">=</span><span style="color:#89DDFF">"</span><span style="color:#C3E88D">custom</span><span style="color:#89DDFF">"</span><span style="color:#C792EA"> style</span><span style="color:#89DDFF">={{</span><span style="color:#F07178"> height</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">60vh</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF"> }}></span></span>
<span class="line"><span style="color:#89DDFF">      &#x3C;</span><span style="color:#F07178">div</span><span style="color:#C792EA"> className</span><span style="color:#89DDFF">={</span><span style="color:#89DDFF">`</span><span style="color:#C3E88D">scroller fill </span><span style="color:#89DDFF">${</span><span style="color:#BABED8">scrollClass </span><span style="color:#89DDFF">||</span><span style="color:#89DDFF"> ''}`</span><span style="color:#89DDFF">}></span></span>
<span class="line"><span style="color:#89DDFF">        &#x3C;</span><span style="color:#F07178">div</span><span style="color:#C792EA"> ref</span><span style="color:#89DDFF">={</span><span style="color:#BABED8">listRef</span><span style="color:#89DDFF">}>{</span><span style="color:#BABED8">children</span><span style="color:#89DDFF">}&#x3C;/</span><span style="color:#F07178">div</span><span style="color:#89DDFF">></span></span>
<span class="line"><span style="color:#89DDFF">      &#x3C;/</span><span style="color:#F07178">div</span><span style="color:#89DDFF">></span></span>
<span class="line"><span style="color:#89DDFF">    &#x3C;/</span><span style="color:#F07178">div</span><span style="color:#89DDFF">></span></span>
<span class="line"><span style="color:#F07178">  )</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF">}</span></span></code></pre>
<ul>
<li>type</li>
</ul>
<pre class="shiki material-theme-palenight" style="background-color:#292D3E;color:#babed8" tabindex="0"><code><span class="line"><span style="color:#FFCB6B">Scrollbar</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> {</span></span>
<span class="line"><span style="color:#FFCB6B">  disabled</span><span style="color:#89DDFF">:</span><span style="color:#BABED8"> boolean</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#FFCB6B">  clearSelection</span><span style="color:#89DDFF">:</span><span style="color:#BABED8"> boolean</span><span style="color:#89DDFF"> |</span><span style="color:#89DDFF"> null;</span></span>
<span class="line"><span style="color:#FFCB6B">  stopSelect</span><span style="color:#89DDFF">:</span><span style="color:#BABED8"> boolean</span><span style="color:#89DDFF"> |</span><span style="color:#89DDFF"> null;</span></span>
<span class="line"><span style="color:#FFCB6B">  watchPageStyle</span><span style="color:#89DDFF">:</span><span style="color:#BABED8"> boolean</span><span style="color:#89DDFF"> |</span><span style="color:#89DDFF"> null;</span></span>
<span class="line"><span style="color:#FFCB6B">  syncPos</span><span style="color:#89DDFF">:</span><span style="color:#BABED8"> boolean</span><span style="color:#89DDFF"> |</span><span style="color:#89DDFF"> null;</span></span>
<span class="line"><span style="color:#FFCB6B">  attach</span><span style="color:#89DDFF">:</span><span style="color:#89DDFF"> (</span><span style="color:#BABED8;font-style:italic">el</span><span style="color:#89DDFF">?:</span><span style="color:#FFCB6B"> HTMLElement</span><span style="color:#89DDFF"> |</span><span style="color:#FFCB6B"> null</span><span style="color:#89DDFF">)</span><span style="color:#C792EA"> =></span><span style="color:#89DDFF"> this;</span></span>
<span class="line"><span style="color:#BABED8">  init</span><span style="color:#89DDFF">?:</span><span style="color:#89DDFF"> ()</span><span style="color:#C792EA"> =></span><span style="color:#89DDFF"> void;</span></span>
<span class="line"><span style="color:#89DDFF">}</span></span></code></pre>
