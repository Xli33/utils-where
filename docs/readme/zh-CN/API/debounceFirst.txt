<h2>debounceFirst</h2>
<p>下一次调用将在上一次调用经过 <code>timeout</code> 后被<strong>同步</strong>触发</p>
<pre class="shiki material-theme-palenight" style="background-color:#292D3E;color:#babed8" tabindex="0"><code><span class="line"><span style="color:#89DDFF;font-style:italic">import</span><span style="color:#89DDFF"> {</span><span style="color:#BABED8"> debounceFirst</span><span style="color:#89DDFF"> }</span><span style="color:#89DDFF;font-style:italic"> from</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">utils-where</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic">// 至少 1 秒没有点击时触发</span></span>
<span class="line"><span style="color:#BABED8">onclick </span><span style="color:#89DDFF">=</span><span style="color:#82AAFF"> debounceFirst</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">()</span><span style="color:#C792EA"> =></span><span style="color:#BABED8"> console</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">log</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">'</span><span style="color:#C3E88D">1</span><span style="color:#89DDFF">'</span><span style="color:#BABED8">)</span><span style="color:#89DDFF">,</span><span style="color:#F78C6C"> 1000</span><span style="color:#BABED8">)</span><span style="color:#89DDFF">;</span></span></code></pre>
<p>结合使用 <code>debounceFirst</code> 和 <code>debounceLast</code> 可以实现视频播放器中常见的某些效果<br>当光标移动时，它显示出来；如果停止移动约 2 秒，它就隐藏。</p>
<p>原始代码可能像这样</p>
<pre class="shiki material-theme-palenight" style="background-color:#292D3E;color:#babed8" tabindex="0"><code><span class="line"><span style="color:#C792EA">let</span><span style="color:#BABED8"> tid</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#82AAFF">onmousemove</span><span style="color:#89DDFF"> =</span><span style="color:#89DDFF"> ()</span><span style="color:#C792EA"> =></span><span style="color:#89DDFF"> {</span></span>
<span class="line"><span style="color:#82AAFF">  clearTimeout</span><span style="color:#F07178">(</span><span style="color:#BABED8">tid</span><span style="color:#F07178">)</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">  if</span><span style="color:#F07178"> (</span><span style="color:#89DDFF">!</span><span style="color:#BABED8">tid</span><span style="color:#F07178">) </span><span style="color:#89DDFF">{</span></span>
<span class="line"><span style="color:#BABED8">    document</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">body</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">style</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">cursor</span><span style="color:#89DDFF"> =</span><span style="color:#89DDFF"> ''</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#BABED8">    console</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">log</span><span style="color:#F07178">(</span><span style="color:#89DDFF">'</span><span style="color:#C3E88D">%cshow</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">font-size:15px</span><span style="color:#89DDFF">'</span><span style="color:#F07178">)</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF">  }</span></span>
<span class="line"><span style="color:#BABED8">  tid</span><span style="color:#89DDFF"> =</span><span style="color:#82AAFF"> setTimeout</span><span style="color:#F07178">(</span><span style="color:#89DDFF">()</span><span style="color:#C792EA"> =></span><span style="color:#89DDFF"> {</span></span>
<span class="line"><span style="color:#BABED8">    tid</span><span style="color:#89DDFF"> =</span><span style="color:#89DDFF"> null;</span></span>
<span class="line"><span style="color:#BABED8">    document</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">body</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">style</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">cursor</span><span style="color:#89DDFF"> =</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">none</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#BABED8">    console</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">log</span><span style="color:#F07178">(</span><span style="color:#89DDFF">'</span><span style="color:#C3E88D">%chidden</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF">,</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">font-size:15px;color:coral</span><span style="color:#89DDFF">'</span><span style="color:#F07178">)</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF">  },</span><span style="color:#F78C6C"> 2000</span><span style="color:#F07178">)</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF">};</span></span></code></pre>
<p>使用 debounceFirst &amp; debounceLast</p>
<pre class="shiki material-theme-palenight" style="background-color:#292D3E;color:#babed8" tabindex="0"><code><span class="line"><span style="color:#89DDFF;font-style:italic">import</span><span style="color:#89DDFF"> {</span><span style="color:#BABED8"> debounceFirst</span><span style="color:#89DDFF">,</span><span style="color:#BABED8"> debounceLast</span><span style="color:#89DDFF"> }</span><span style="color:#89DDFF;font-style:italic"> from</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">utils-where</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA">const</span><span style="color:#BABED8"> showCursor </span><span style="color:#89DDFF">=</span><span style="color:#82AAFF"> debounceFirst</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">()</span><span style="color:#C792EA"> =></span><span style="color:#BABED8"> (document</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">body</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">style</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">cursor </span><span style="color:#89DDFF">=</span><span style="color:#89DDFF"> ''</span><span style="color:#BABED8">)</span><span style="color:#89DDFF">,</span><span style="color:#F78C6C"> 2000</span><span style="color:#BABED8">)</span><span style="color:#89DDFF">,</span></span>
<span class="line"><span style="color:#BABED8">  hideCursor </span><span style="color:#89DDFF">=</span><span style="color:#82AAFF"> debounceLast</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">()</span><span style="color:#C792EA"> =></span><span style="color:#BABED8"> (document</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">body</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">style</span><span style="color:#89DDFF">.</span><span style="color:#BABED8">cursor </span><span style="color:#89DDFF">=</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">none</span><span style="color:#89DDFF">'</span><span style="color:#BABED8">)</span><span style="color:#89DDFF">,</span><span style="color:#F78C6C"> 2000</span><span style="color:#BABED8">)</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic">// 或者使用 addEventListener</span></span>
<span class="line"><span style="color:#676E95;font-style:italic">// addEventListener('mousemove', showCursor);</span></span>
<span class="line"><span style="color:#676E95;font-style:italic">// addEventListener('mousemove', hideCursor);</span></span>
<span class="line"><span style="color:#82AAFF">onmousemove</span><span style="color:#89DDFF"> =</span><span style="color:#89DDFF"> ()</span><span style="color:#C792EA"> =></span><span style="color:#89DDFF"> {</span></span>
<span class="line"><span style="color:#82AAFF">  showCursor</span><span style="color:#F07178">()</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#82AAFF">  hideCursor</span><span style="color:#F07178">()</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF">};</span></span></code></pre>
<ul>
<li>type</li>
</ul>
<pre class="shiki material-theme-palenight" style="background-color:#292D3E;color:#babed8" tabindex="0"><code><span class="line"><span style="color:#C792EA">interface</span><span style="color:#FFCB6B"> DebounceFirstWrap</span><span style="color:#89DDFF">&#x3C;</span><span style="color:#FFCB6B">T</span><span style="color:#C792EA"> extends</span><span style="color:#FFCB6B"> Func</span><span style="color:#89DDFF">></span><span style="color:#89DDFF"> {</span></span>
<span class="line"><span style="color:#89DDFF">  (...</span><span style="color:#BABED8;font-style:italic">args</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> Parameters</span><span style="color:#89DDFF">&#x3C;</span><span style="color:#FFCB6B">T</span><span style="color:#89DDFF">>):</span><span style="color:#FFCB6B"> ReturnType</span><span style="color:#89DDFF">&#x3C;</span><span style="color:#FFCB6B">T</span><span style="color:#89DDFF">></span><span style="color:#89DDFF"> |</span><span style="color:#FFCB6B"> void</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#F07178">  _tid</span><span style="color:#89DDFF">?:</span><span style="color:#FFCB6B"> number</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#F07178">  flag</span><span style="color:#89DDFF">?:</span><span style="color:#FFCB6B"> true</span><span style="color:#89DDFF"> |</span><span style="color:#FFCB6B"> null</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8">debounceFirst</span><span style="color:#89DDFF">&#x3C;</span><span style="color:#FFCB6B">T</span><span style="color:#C792EA"> extends</span><span style="color:#FFCB6B"> Func</span><span style="color:#89DDFF">>(</span><span style="color:#BABED8;font-style:italic">callback</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> T</span><span style="color:#89DDFF">,</span><span style="color:#BABED8;font-style:italic"> timeout</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> number</span><span style="color:#89DDFF">):</span><span style="color:#FFCB6B"> DebounceFirstWrap</span><span style="color:#89DDFF">&#x3C;</span><span style="color:#FFCB6B">T</span><span style="color:#89DDFF">></span></span></code></pre>
