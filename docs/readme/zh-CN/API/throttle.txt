<h2>throttle</h2>
<p>获取一个节流函数，它只在 <code>interval</code> 之后被<strong>同步</strong>调用。一个用于<strong>异步</strong>调用的 <code>onEnd</code> 监听器可以被添加到返回的函数上</p>
<pre class="shiki material-theme-palenight" style="background-color:#292D3E;color:#babed8" tabindex="0"><code><span class="line"><span style="color:#89DDFF;font-style:italic">import</span><span style="color:#89DDFF"> {</span><span style="color:#BABED8"> throttle</span><span style="color:#89DDFF"> }</span><span style="color:#89DDFF;font-style:italic"> from</span><span style="color:#89DDFF"> '</span><span style="color:#C3E88D">utils-where</span><span style="color:#89DDFF">'</span><span style="color:#89DDFF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA">const</span><span style="color:#BABED8"> o </span><span style="color:#89DDFF">=</span><span style="color:#89DDFF"> {</span></span>
<span class="line"><span style="color:#F07178">  click</span><span style="color:#89DDFF">:</span><span style="color:#82AAFF"> throttle</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">()</span><span style="color:#C792EA"> =></span><span style="color:#89DDFF"> {</span></span>
<span class="line"><span style="color:#BABED8">    console</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">log</span><span style="color:#F07178">(</span><span style="color:#89DDFF">this</span><span style="color:#F07178">)</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">    return</span><span style="color:#F78C6C"> 1</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF">  },</span><span style="color:#F78C6C"> 1000</span><span style="color:#BABED8">)</span><span style="color:#89DDFF">,</span></span>
<span class="line"><span style="color:#F07178">  move</span><span style="color:#89DDFF">:</span><span style="color:#82AAFF"> throttle</span><span style="color:#BABED8">(</span><span style="color:#C792EA">function</span><span style="color:#89DDFF"> ()</span><span style="color:#89DDFF"> {</span></span>
<span class="line"><span style="color:#BABED8">    console</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">log</span><span style="color:#F07178">(</span><span style="color:#89DDFF">this</span><span style="color:#F07178">)</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic">    return</span><span style="color:#89DDFF"> ''</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#89DDFF">  },</span><span style="color:#F78C6C"> 500</span><span style="color:#BABED8">)</span></span>
<span class="line"><span style="color:#89DDFF">};</span></span>
<span class="line"><span style="color:#BABED8">o</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">click</span><span style="color:#BABED8">() </span><span style="color:#89DDFF">===</span><span style="color:#F78C6C"> 1</span><span style="color:#89DDFF">;</span><span style="color:#676E95;font-style:italic"> // 打印的 'this' 不是 o</span></span>
<span class="line"><span style="color:#BABED8">o</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">move</span><span style="color:#BABED8">() </span><span style="color:#89DDFF">===</span><span style="color:#89DDFF"> ''</span><span style="color:#89DDFF">;</span><span style="color:#676E95;font-style:italic"> // 打印的 'this' 是 o 本身</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic">// 如果需要，添加一个结束监听器，在某些事件如 'mousemove' 中可能不需要。`onEnd` 在task队列中执行</span></span>
<span class="line"><span style="color:#C792EA">const</span><span style="color:#BABED8"> click </span><span style="color:#89DDFF">=</span><span style="color:#82AAFF"> throttle</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">()</span><span style="color:#C792EA"> =></span><span style="color:#BABED8"> console</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">log</span><span style="color:#BABED8">(</span><span style="color:#F78C6C">1</span><span style="color:#BABED8">)</span><span style="color:#89DDFF">,</span><span style="color:#F78C6C"> 500</span><span style="color:#BABED8">)</span><span style="color:#89DDFF">;</span></span>
<span class="line"><span style="color:#BABED8">click</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">onEnd</span><span style="color:#89DDFF"> =</span><span style="color:#89DDFF"> ()</span><span style="color:#C792EA"> =></span><span style="color:#BABED8"> console</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">log</span><span style="color:#BABED8">(</span><span style="color:#89DDFF">'</span><span style="color:#C3E88D">the end call maybe unnecessary</span><span style="color:#89DDFF">'</span><span style="color:#BABED8">)</span><span style="color:#89DDFF">;</span></span></code></pre>
<ul>
<li>type</li>
</ul>
<pre class="shiki material-theme-palenight" style="background-color:#292D3E;color:#babed8" tabindex="0"><code><span class="line"><span style="color:#BABED8">throttle</span><span style="color:#89DDFF">&#x3C;</span><span style="color:#FFCB6B">T</span><span style="color:#C792EA"> extends</span><span style="color:#FFCB6B"> Func</span><span style="color:#89DDFF">>(</span><span style="color:#BABED8;font-style:italic">callback</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> T</span><span style="color:#89DDFF">,</span><span style="color:#BABED8;font-style:italic"> interval</span><span style="color:#89DDFF">:</span><span style="color:#FFCB6B"> number</span><span style="color:#89DDFF">):</span><span style="color:#FFCB6B"> ThrottleWrap</span><span style="color:#89DDFF">&#x3C;</span><span style="color:#FFCB6B">T</span><span style="color:#89DDFF">></span></span></code></pre>
